<!DOCTYPE html>
<html>
  <head>
    <style>
      html { height: 100% }
      body { height: 100%; margin: 0px; padding: 0px }
      #container { width: 100%; height: 100% }
      #nav { z-index: 100; position: absolute; 
             margin: 10px 0px 0px 200px; background-color: #fff; 
             border: 1px #000 Solid; padding: 5px; }
      #map { width: 100%; height: 100% }
    </style>
  </head>
  <body>
    <div id="container">
      <div id="nav">Nav Menu</div>
      <div id="map"></div>
    </div>
    <script>
      function initMap(map) {
        var uluru = {lat: -25.363, lng: 131.044};
        var paris = {lat: 48.8566, lng: 2.3522};
        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 10,
          center: paris
        });
        var marker = new google.maps.Marker({
          position: uluru,
          map: map
        });
        populateMap(map);
      }

      function populateMap(map){
        $.getJSON('http://127.0.0.1:3000/stations', function(data){
          console.log(data);
          for(var i = 0; i<data.length;i++){
            //console.log(data[i].lonlat[0])
            var marker = new google.maps.Marker({
              position: {lat:parseFloat(data[i].lonlat[1]),lng:parseFloat(data[i].lonlat[0])},
              map: map,
              title: data[i].address + ", " + data[i].postcode + " " + data[i].city
            });

          }

        });
      }
    </script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js">
    </script>
    <script async defer src="./loadGoogleMaps.js">
    </script>
  </body>
</html>